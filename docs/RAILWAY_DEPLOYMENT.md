# ==============================================================================

# Railway.app Configuration

# ==============================================================================

# Railway detects your Dockerfile automatically, but you can customize here

# ==============================================================================

## Quick Deploy to Railway:

### Step 1: Install Railway CLI (Optional)

```powershell
npm install -g @railway/cli
# or
choco install railway
```

### Step 2: Login and Init

```powershell
railway login
railway init
```

### Step 3: Deploy

```powershell
# Railway auto-detects your Dockerfile
railway up

# Or link to GitHub for automatic deploys
railway link
```

### Step 4: Add Services

Railway will create a project. Add services:

1. **API Service:**

   - Connects to your GitHub repo
   - Auto-detects `apps/api/Dockerfile`
   - Auto-deploys on push to main

2. **PostgreSQL Database:**

   ```powershell
   railway add postgres
   ```

   Railway automatically injects `DATABASE_URL`

3. **RabbitMQ:**
   ```powershell
   railway add rabbitmq
   ```
   Railway automatically injects `RABBIT_URL`

### Step 5: Set Environment Variables

In Railway dashboard:

```
PORT=5001
NODE_ENV=production
SESSION_SECRET=<auto-generated>
API_KEY=<auto-generated>
CORS_ORIGINS=https://yourdomain.com
```

### Step 6: Get Your URL

Railway gives you:

```
https://morpho-api-production.up.railway.app
```

Add custom domain in Railway dashboard.

## Or Use GitHub Integration (Easier):

1. Go to https://railway.app
2. Click "New Project"
3. Select "Deploy from GitHub repo"
4. Choose `morpho-shorts-factory`
5. Railway automatically:
   - Detects your Dockerfile
   - Builds and deploys
   - Gives you a URL
   - Sets up auto-deploy

## Environment Variables:

Railway has a great UI for managing secrets.
Add these in the Railway dashboard:

```
PORT=5001
NODE_ENV=production
DATABASE_URL=<auto-injected-by-railway>
RABBIT_URL=<auto-injected-by-railway>
SESSION_SECRET=<generate-in-dashboard>
API_KEY=<generate-in-dashboard>
CORS_ORIGINS=https://yourdomain.com
```

## Cost:

- **Hobby Plan:** $5/month
  - Includes all services (API, DB, RabbitMQ)
  - 512MB RAM per service
  - $5/month flat rate

## Why Railway?

âœ… Easiest deployment (5 minutes)
âœ… Auto-detects Dockerfile
âœ… Built-in databases (PostgreSQL, Redis, etc)
âœ… Built-in RabbitMQ
âœ… One-click deploy from GitHub
âœ… Automatic SSL
âœ… Custom domains
âœ… Environment variable management
âœ… Great for monorepos
âœ… Generous free trial

## Next Steps:

1. Sign up: https://railway.app
2. Connect GitHub
3. Deploy in 3 clicks
4. Your API is live! ðŸš€
